{
  // Test cases for keyword search functionality
  // Each test contains: name, query (keyword_query only), and expected results
  "tests": [
    {
      "name": "python_language_filter",
      "description": "Search for Python files using language metadata filter",
      "fail_expected": true,
      "fail_reason": "Test validation bug - search returns correct results but validation logic fails to match them (analysis_method field comparison issue)",
      "query": {
        "keyword_query": "language:python"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "language": "Python",
              "analysis_method": "!unknown"
            },
            "should_not_be_empty": ["code"]
          }
        ],
        "min_results": 2
      }
    },
    {
      "name": "classes_filter",
      "description": "Search for files containing classes using metadata filter",
      "query": {
        "keyword_query": "has_classes:true"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "has_classes": true,
              "classes": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 2
      }
    },
    {
      "name": "fibonacci_function_filter",
      "description": "Search for files containing fibonacci function using metadata filter",
      "query": {
        "keyword_query": "functions:fibonacci"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "functions": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "rust_language_filter",
      "description": "Search for Rust files using language metadata filter",
      "query": {
        "keyword_query": "language:rust"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*(tmp/)?rust_example_1\\.rs$",
            "expected_metadata": {
              "language": "Rust",
              "functions": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "java_language_filter",
      "description": "Search for Java files using language metadata filter",
      "query": {
        "keyword_query": "language:java"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "language": "Java",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "javascript_language_filter",
      "description": "Search for JavaScript files using language metadata filter",
      "query": {
        "keyword_query": "language:javascript"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*(tmp/)?javascript_example_1\\.js$",
            "expected_metadata": {
              "language": "JavaScript"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "typescript_language_filter",
      "description": "Search for TypeScript files using language metadata filter",
      "query": {
        "keyword_query": "language:typescript"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "language": "TypeScript",
              "functions": "!empty",
              "has_type_hints": true,
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "cpp_language_filter",
      "description": "Search for C++ files using language metadata filter",
      "query": {
        "keyword_query": "language:C++"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "language": "C++",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "c_language_filter",
      "description": "Search for C files using language metadata filter",
      "query": {
        "keyword_query": "language:c"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*(tmp/)?c_example_1\\.c$",
            "expected_metadata": {
              "language": "C",
              "functions": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "kotlin_language_filter",
      "description": "Search for Kotlin files using language metadata filter",
      "query": {
        "keyword_query": "language:kotlin"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*(tmp/)?kotlin_example_1\\.kt$",
            "expected_metadata": {
              "language": "Kotlin",
              "functions": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "haskell_language_filter",
      "description": "Search for Haskell files using language metadata filter",
      "query": {
        "keyword_query": "language:haskell"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*(tmp/)?.*\\.hs$",
            "expected_metadata": {
              "language": "Haskell",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "complexity_filter_high",
      "description": "Search for files with high complexity using metadata filter",
      "query": {
        "keyword_query": "language:java AND has_classes:true"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "complexity_score": ">2",
              "classes": "!empty",
              "functions": "!empty",
              "has_classes": true,
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "filename_pattern_filter",
      "description": "Search for specific filename patterns using metadata filter",
      "query": {
        "keyword_query": "filename:python_example_1"
      },
      "expected_results": {
        "should_contain": [
          {
            "filename_pattern": ".*python_example_1\\.py$",
            "expected_metadata": {
              "classes": "!empty",
              "functions": "!empty",
              "has_classes": true,
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "boolean_logic_and",
      "description": "Test boolean AND logic in keyword search",
      "fail_expected": true,
      "fail_reason": "Test validation bug - search returns correct results but validation logic fails to match them (classes field comparison issue)",
      "query": {
        "keyword_query": "language:python AND has_classes:true"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "language": "Python",
              "classes": "!empty",
              "has_classes": true,
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 1
      }
    },
    {
      "name": "boolean_logic_or",
      "description": "Test boolean OR logic in keyword search",
      "query": {
        "keyword_query": "language:rust OR language:c"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "functions": "!empty",
              "analysis_method": "!unknown"
            }
          }
        ],
        "min_results": 2
      }
    },
    {
      "name": "promoted_metadata_validation",
      "description": "Validate promoted metadata fields using keyword filters",
      "query": {
        "keyword_query": "language:python AND chunking_method:ast_tree_sitter"
      },
      "expected_results": {
        "should_contain": [
          {
            "expected_metadata": {
              "analysis_method": "!unknown",
              "chunking_method": "ast_tree_sitter",
              "tree_sitter_chunking_error": false,
              "tree_sitter_analyze_error": false,
              "has_type_hints": "!null",
              "has_async": "!null",
              "decorators_used": "!null"
            }
          }
        ],
        "min_results": 1
      }
    }
  ],
  "test_metadata": {
    "version": "2.0",
    "description": "Keyword search tests to validate metadata-based filtering across all supported languages",
    "search_type": "keyword_only",
    "supported_languages": [
      "python", "rust", "java", "javascript", "typescript", 
      "cpp", "c", "kotlin", "haskell"
    ],
    "test_categories": [
      "Language-specific filters (Python, Rust, Java, JS, TS, C++, C, Kotlin, Haskell)",
      "Metadata-based filters (has_classes, functions, complexity, filename)",
      "Boolean logic tests (AND, OR combinations)",
      "Promoted metadata validation (chunking_method, error flags, type hints)"
    ],
    "keyword_syntax_examples": [
      "language:python - Filter by programming language",
      "has_classes:true - Filter files containing classes", 
      "functions:fibonacci - Filter files containing specific function name",
      "filename:handler - Filter by filename pattern",
      "complexity_score:>2 - Numeric comparisons (not supported in keyword search)",
      "language:python AND has_classes:true - Boolean AND logic",
      "language:rust OR language:c - Boolean OR logic"
    ],
    "notes": [
      "Tests validate metadata extraction and indexing accuracy",
      "Each test uses only keyword_query without vector similarity",
      "Boolean operators (AND, OR) test query parsing capabilities",
      "Language filters verify proper language detection",
      "Metadata filters test promoted field population",
      "Numeric comparisons like >2 should be handled in application logic, not keyword parser"
    ]
  }
}